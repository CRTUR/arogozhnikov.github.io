---
layout: post
title: Minibus stochastic process (part 1)
date: '2014-11-23T14:57:00.001-08:00'
author: Alex Rogozhnikov
tags:
- Branching process
- Minibus process
modified_time: '2014-11-23T14:57:27.805-08:00'
blogger_id: tag:blogger.com,1999:blog-307916792578626510.post-8326490379402722620
blogger_orig_url: http://brilliantlywrong.blogspot.com/2014/11/minibus-stochastic-process-part-1.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">Recently I had a talk in Pereslavl, so I needed to get up early and travel to bus station, because the only way to get to Pereslavl on public transport is by intercity bus.<br /><br />Well, that was a long way (about 6 hours one direction). But first step was to get to nearest underground station, which is not so trivial in mornings. People hurry, traffic jams make public transport circulate slowly, and as a result, there is crowding in nearly every bus/minibus moving towards city center or nearest underground station.<br /><br />After I found a place for me in one of minibuses I was quite sure that there is at most free place for one or two passengers.<br /><br />Of course, I was wrong. The minibus was moving its way and driver skipped the stops if nobody wanted to get off, since minibus was already filled. But when he stopped and one of passengers got off, two new were coming into, which made it even more crowdy inside.<br /><br />Each time I was sure, that after looking inside people won't enter the minibus, and each time they did. Exactly two new passengers, others for some reason didn't dare.<br /><br />So I invented such a simple stochastic process:<br />At $t=0$ there is only one passenger. During small time interval $\Delta t$ each passenger with probability&nbsp;$\alpha \Delta t$ &nbsp;wants to get off. When he gets off, two new passengers are entering the bus.<br /><br /><h3 style="text-align: left;">Studying the <a href="http://en.wikipedia.org/wiki/Probability-generating_function" target="_blank">probability-generating function</a></h3>Let's introduce an analytical over $s$ function that will describe the process:<br />$F(t, s) = \sum_{n=0}^{+\infty} p_n (t) s^n$, where $p_n(t)$ is probability that at the moment $t$ there are exactly $n$ passengers.<br /><br />Note:<br /><br /><ol style="text-align: left;"><li>$F(t,1) = 1$ for any $t$, since the probabilities sum up to 1.</li><li>$F(0,s) = s$, since initially there was exactly one passenger</li></ol><div>Now let's think about how this system evolves. During small time interval $\Delta t$ with probability $\alpha n \Delta t$ the number of passengers is incremented (by one).</div><div><br /></div><div>This is mathematically written as:</div><div>$$p_n(t + \Delta t) \cong p_n(t) + \alpha (n-1) \Delta t &nbsp;p_{n-1}(t) - \alpha n \Delta t &nbsp;p_{n}(t), \quad p_0 \equiv 0$$</div><div>Which in the limit $\Delta t \to 0$ turns into system of ODEs:</div><br /><div>$$\frac{d}{dt} p_n(t) = &nbsp;- \alpha n &nbsp;p_{n}(t) + \alpha (n-1) p_{n-1}(t), \quad p_0 \equiv 0$$</div><div><br /></div><div>Or equivalently this can be written as single PDE:</div><br /><div>$$F_t(t,s) = \alpha F_s(t,s) (s^2 - s) $$</div><div><br /></div><div>The last one is solved in typical way:</div><div>$$F=F(z), \quad z=e^{-\alpha t}\frac{s}{1-s}$$</div><div>So we can compute value for any $t,s$ by</div><div>$$F(t,s) = F(0,s_0), \text{where } \; e^0 \frac{s_0}{1-s_0} = z = &nbsp;e^{-\alpha t}\frac{s}{1-s}, $$</div><div>and it is now easy to compute that</div><br /><div>$$s_0 = \frac{1}{1 + e^{\alpha t} \frac{1 - s}{s} }, $$</div><div>so for our setting with one passenger at $t=0$:</div><div>$$F(t,s) = s_0 = \frac{1}{1 + e^{\alpha t} \frac{1 - s}{s} } &nbsp;= &nbsp; \frac{s e^{-\alpha t}}{1 &nbsp;- s(1 - e^{-\alpha t}) }&nbsp;$$</div><div><br /></div><div>and we can see that at moment $t$ this is <a href="http://en.wikipedia.org/wiki/Geometric_distribution" target="_blank">geometric distribution</a>&nbsp;with mean=$e^{\alpha t}$.</div><div><br /></div><div>As an example to play with, you can try to repeat the same for the process where a man is leaving the minibus and nobody comes in (so that is like fermion version of the same problem :) )</div><div>You'd get</div><div>$$F_t(t,s) = \alpha F_s(t,s) (1 - s) $$</div><div>$$F_t(t,s) = s e^{-\alpha t} + (1 - e^{-\alpha t}) $$</div><div><br /></div><div>For the version with $k$ new passengers one would have the following PDE:</div><div><div>$$F_t(t,s) = \alpha F_s(t,s) (s^k - s), $$</div></div><div>which is studied the same way</div><div><br /></div><div><b>NB</b>: Easy to see that $F_t(t,1) = \text{const} $, which is good sign (probabilities always sum up to 1), and a simple self-check.</div><div><br /></div><div>First I solved this problem, then thought about possible applications and googled them.&nbsp;</div><div>The interesting thing that such systems form quite popular topic in statistics: they are called 'branching processes'.&nbsp;</div><div>What is it in general case, and what are applications of such mad model - in the next part.</div></div>